import { useState } from "react";
import Modal from "../Modal/Modal";
import "./ExpenseItem.css";

export default function ExpenseItem(props) {
  const [showUpdateUser, setShowUpdateUser] = useState(false);
  const [currentId, setCurrentId] = useState("");

  const handleCancel = () => {
    setShowUpdateUser(false);
  };
  const showUpdateUserModal = (id) => {
    setCurrentId(id);
    setShowUpdateUser(true);
  };

  const updateExpense = (name,type, date, amount) => {
    props.updateExpense(currentId, name,type, date, amount);
  };

  return (
    <div className="item">
      {showUpdateUser && (
        <Modal
          cancelAction={handleCancel}
          id={props.id}
          type={"UpdateUser"}
          name={props.name}
          itemType={props.type}
          date={props.date}
          amount={props.amount}
          updateExpense={updateExpense}
        />
      )}

      <div className="itemDetails">
        <h4 className="itemName">{props.name}</h4>
        {/* <p>{props.type}</p> */}
        <p className="itemDate">{props.date}</p>
      </div>
      <div className="itemLeft">
        <div
          className={`itemAmount ${
            props.type === "Expense" ? "expenseItem" : "incomeItem"
          }`}
        >
          <p>${props.amount}</p>
        </div>
        <div className="itemActions">
          <svg
            onClick={() => showUpdateUserModal(props.id)}
            width="18"
            height="18"
            viewBox="0 0 18 18"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M1.6929 16.0039H2.92942L12.1891 6.74426L10.9526 5.50771L1.6929 14.7674V16.0039ZM15.3967 5.65966L12.0218 2.31549L13.3352 1.00204C13.6224 0.714872 13.9762 0.571289 14.3967 0.571289C14.8172 0.571289 15.1711 0.714872 15.4582 1.00204L16.6948 2.23856C16.982 2.52573 17.1307 2.87444 17.1409 3.28469C17.1512 3.69494 17.0127 4.04365 16.7255 4.33081L15.3967 5.65966ZM1.09677 17.5039C0.839089 17.5039 0.624031 17.4177 0.451597 17.2452C0.279164 17.0728 0.192947 16.8577 0.192947 16.6V14.5059C0.192947 14.3853 0.214739 14.2706 0.258322 14.1616C0.301905 14.0527 0.370497 13.9514 0.464097 13.8578L10.9372 3.38469L14.3121 6.75964L3.83902 17.2327C3.74544 17.3263 3.64416 17.3949 3.5352 17.4385C3.42621 17.4821 3.31146 17.5039 3.19095 17.5039H1.09677Z" />
          </svg>
          <svg
            onClick={() => props.removeExpense(props.id)}
            width="16"
            height="18"
            viewBox="0 0 16 18"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path d="M2.525 18C2.125 18 1.775 17.85 1.475 17.55C1.175 17.25 1.025 16.9 1.025 16.5L1.025 2.25L0.75 2.25C0.533333 2.25 0.354166 2.17917 0.2125 2.0375C0.0708331 1.89583 -3.00152e-07 1.71667 -2.62268e-07 1.5C-2.24385e-07 1.28333 0.0708332 1.10417 0.2125 0.9625C0.354167 0.820834 0.533333 0.75 0.75 0.75L4.7 0.750001C4.7 0.533334 4.77083 0.354168 4.9125 0.212501C5.05417 0.0708343 5.23333 9.15025e-07 5.45 9.52908e-07L10.55 1.84462e-06C10.7667 1.8825e-06 10.9458 0.0708353 11.0875 0.212502C11.2292 0.354169 11.3 0.533335 11.3 0.750002L15.25 0.750003C15.4667 0.750003 15.6458 0.820836 15.7875 0.962503C15.9292 1.10417 16 1.28334 16 1.5C16 1.71667 15.9292 1.89584 15.7875 2.0375C15.6458 2.17917 15.4667 2.25 15.25 2.25L14.975 2.25L14.975 16.5C14.975 16.9 14.825 17.25 14.525 17.55C14.225 17.85 13.875 18 13.475 18L2.525 18ZM2.525 2.25L2.525 16.5L13.475 16.5L13.475 2.25L2.525 2.25ZM5.175 13.6C5.175 13.8167 5.24583 13.9958 5.3875 14.1375C5.52916 14.2792 5.70833 14.35 5.925 14.35C6.14166 14.35 6.32083 14.2792 6.4625 14.1375C6.60416 13.9958 6.675 13.8167 6.675 13.6L6.675 5.125C6.675 4.90833 6.60417 4.72917 6.4625 4.5875C6.32083 4.44583 6.14167 4.375 5.925 4.375C5.70833 4.375 5.52917 4.44583 5.3875 4.5875C5.24583 4.72917 5.175 4.90833 5.175 5.125L5.175 13.6ZM9.325 13.6C9.325 13.8167 9.39583 13.9958 9.5375 14.1375C9.67916 14.2792 9.85833 14.35 10.075 14.35C10.2917 14.35 10.4708 14.2792 10.6125 14.1375C10.7542 13.9958 10.825 13.8167 10.825 13.6L10.825 5.125C10.825 4.90834 10.7542 4.72917 10.6125 4.5875C10.4708 4.44584 10.2917 4.375 10.075 4.375C9.85833 4.375 9.67917 4.44583 9.5375 4.5875C9.39583 4.72917 9.325 4.90833 9.325 5.125L9.325 13.6ZM2.525 2.25L2.525 16.5L2.525 2.25Z" />
          </svg>
        </div>
      </div>
    </div>
  );
}
